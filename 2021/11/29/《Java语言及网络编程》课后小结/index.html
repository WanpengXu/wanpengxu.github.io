

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#908e83">
  <meta name="description" content="尝试着记录课程所学，内容来自CUMT&#39;s PPT或《Java核心技术 卷I 基础知识》或网络">
  <meta name="author" content="须臾许">
  <meta name="keywords" content="">
  <meta name="description" content="尝试着记录课程所学，内容来自CUMT&#39;s PPT或《Java核心技术 卷I 基础知识》或网络">
<meta property="og:type" content="article">
<meta property="og:title" content="《Java语言及网络编程》课后小结">
<meta property="og:url" content="http://example.com/2021/11/29/%E3%80%8AJava%E8%AF%AD%E8%A8%80%E5%8F%8A%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E3%80%8B%E8%AF%BE%E5%90%8E%E5%B0%8F%E7%BB%93/index.html">
<meta property="og:site_name" content="须臾所学之野">
<meta property="og:description" content="尝试着记录课程所学，内容来自CUMT&#39;s PPT或《Java核心技术 卷I 基础知识》或网络">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192119542.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192132245.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192133693.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192148407.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192204165.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192215828.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192209889.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192217638.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291010551.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291011178.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291017517.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291015737.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291020289.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291023640.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291027333.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291028360.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291030193.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291032952.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112011108665.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112011131246.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091930957.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091933259.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091937376.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112092021983.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112092018603.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112100931666.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112110019007.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112102354155.png">
<meta property="article:published_time" content="2021-11-29T02:37:34.000Z">
<meta property="article:modified_time" content="2021-12-21T07:07:49.870Z">
<meta property="article:author" content="许">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192119542.png">
  
  <title>《Java语言及网络编程》课后小结 - 须臾所学之野</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"VR5uSrKiTuoIcwbhhvot8Bf4-gzGzoHsz","app_key":"w57XHS7hMjAYidjnpR0AAoTC","server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>许&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="《Java语言及网络编程》课后小结">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-29 10:37" pubdate>
        2021年11月29日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      27k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      83 分钟
    </span>
  

  
  
    
      <!-- LeanCloud 统计文章PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
    <!-- <a target="_blank" rel="noopener" href="https://github.com/WanpengXu" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style> -->
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">《Java语言及网络编程》课后小结</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年12月21日 下午
                
              </p>
            
            <div class="markdown-body">
              <h1 id="《Java语言及网络编程》课后小结"><a href="#《Java语言及网络编程》课后小结" class="headerlink" title="《Java语言及网络编程》课后小结"></a>《Java语言及网络编程》课后小结</h1><h1 id="What’s-Java"><a href="#What’s-Java" class="headerlink" title="What’s Java?"></a>What’s Java?</h1><h2 id="Java的设计哲学"><a href="#Java的设计哲学" class="headerlink" title="Java的设计哲学"></a>Java的设计哲学</h2><p>每一种语言都有它的设计哲学，如python的准则——著名的“python之禅”。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192119542.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>那么我们所熟知的C++呢？C++之父在《C++语言的设计和演化》一书中写出了C++的目标与一般性规则（Chap4 C++语言设计规则）。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192132245.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192133693.png" srcset="/img/loading.gif" lazyload alt="image-20211219213320557"></p>
<p>可以看到，这似乎与python是相反的设计理念——python希望开发者“用一种方法，最好是只有一种方法来做一件事”，“Beautiful is better than ugly.”，而C++希望“总提供一条转变的通路”、“为每种应该支持的风格提供全面支持”。</p>
<p>私以为C++的设计理念导致了它如今的些许落寞——很多人认为C++是他们痛苦记忆的根源，连《Java核心技术》中都写道</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192148407.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>但不可否认，现代C++是难入门的、复杂的、效率高的、熟悉后很实用的一门语言。</p>
<p>那么Java呢？它的设计理念是什么？</p>
<p>Java的设计者编写了一本颇有影响力的“<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/language-environment.html">白皮书</a>”用于解释设计的初衷及完成的情况。</p>
<p>它的摘要中写道</p>
<p><strong>1.2.1 简单、面向对象、熟悉</strong></p>
<p><strong>1.2.2 健壮和安全</strong></p>
<p><strong>1.2.3 架构中立且可移植</strong></p>
<p><strong>1.2.4 高性能</strong></p>
<p><strong>1.2.5 解释型、线程型和动态型</strong></p>
<p>拆开来就是</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192204165.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>另外，这本白皮书每章前面都有一些名言，我很喜欢。eg.</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192215828.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>这是一些具体的设计原则，更加抽象的如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192209889.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>因为课程还没有上完，所以我对它的理解是：类似C++的、全面向对象的、支持网络编程的、比C++简单且安全的一门语言。</p>
<h2 id="Java的各种专业名词"><a href="#Java的各种专业名词" class="headerlink" title="Java的各种专业名词"></a>Java的各种专业名词</h2><p>老师上课总说的Java SE 5是什么？JDK1.5又是什么？为什么配套的东西会有两个版本号？</p>
<p>详见《Java核心编程》Chap2</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Java SE版本</th>
<th>JDK版本</th>
<th>发布时间</th>
<th>开发代号</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oak</td>
<td></td>
<td>1995-05-23</td>
<td>Oak(橡树)</td>
</tr>
<tr>
<td>Java 1.0</td>
<td>JDK1.0</td>
<td>1996-01-23</td>
<td></td>
</tr>
<tr>
<td>Java 1.1</td>
<td>JDK1.1</td>
<td>1997-02-18</td>
<td></td>
</tr>
<tr>
<td>J2SE 1.2</td>
<td>JDK1.2</td>
<td>1998-12-04</td>
<td>Playground（运动场）</td>
</tr>
<tr>
<td>J2SE 1.3</td>
<td>JDK1.3</td>
<td>2000-05-08</td>
<td>Kestrel（美洲红隼）</td>
</tr>
<tr>
<td>J2SE 1.4</td>
<td>JDK1.4</td>
<td>2002-02-13</td>
<td>Merlin（灰背隼）</td>
</tr>
<tr>
<td>Java SE 5.0</td>
<td>JDK1.5</td>
<td>2004-09-29</td>
<td>Tiger（老虎）</td>
</tr>
<tr>
<td>Java SE 6</td>
<td>JDK1.6</td>
<td>2006-12-11</td>
<td>Mustang（野马）</td>
</tr>
<tr>
<td>Java SE 7</td>
<td>JDK1.7</td>
<td>2011-07-28</td>
<td>Dolphin（海豚）</td>
</tr>
<tr>
<td>Java SE 8</td>
<td>JDK1.8</td>
<td>2014-03-18</td>
<td>Spider（蜘蛛）</td>
</tr>
<tr>
<td>Java SE 9</td>
<td>JDK1.9</td>
<td>2017-09-21</td>
<td></td>
</tr>
<tr>
<td>Java SE 10</td>
<td>JDK10</td>
<td>2018-03-21</td>
<td></td>
</tr>
<tr>
<td>Java SE 11</td>
<td>JDK11</td>
<td>2018-09-25</td>
<td></td>
</tr>
<tr>
<td>Java SE 12</td>
<td>JDK12</td>
<td>2019-3-20</td>
</tr>
</tbody>
</table>
</div>
<p>另外，相比于“懒惰”的C++，“勤奋”的Java的更新频率要高得多。（C++语言近几次更新的标准是C++20、C++17、C++14、C++11、C++03、C++98，要么很久不更新，要么一更新就带来一大堆全新特性，近几年因感受到了威胁，C++委员会提高了更新频率）。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112192217638.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h1 id="11-29-基本语法"><a href="#11-29-基本语法" class="headerlink" title="11.29 基本语法"></a>11.29 基本语法</h1><ol>
<li><p>发现java17中的<code>java &lt;file&gt;.java</code>似乎只能编译单个类</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291010551.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291011178.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>另外，想要从指令路径中运行class，需要使用<code>java -classpath &lt;dir&gt; &lt;file&gt;</code>命令</p>
<p>所以vscode中java对应的task.json可以这样配置</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span><br>    <span class="hljs-comment">// for the documentation about the tasks.json format</span><br>    <span class="hljs-attr">&quot;version&quot;</span>: <span class="hljs-string">&quot;2.0.0&quot;</span>,<br>    <span class="hljs-attr">&quot;tasks&quot;</span>: [<br>     &#123;<br>      <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;javac&quot;</span>,<br>      <span class="hljs-attr">&quot;command&quot;</span>: <span class="hljs-string">&quot;javac $&#123;file&#125; -d $&#123;fileDirname&#125;\\bin&quot;</span>,<br>      <span class="hljs-comment">// &quot;command&quot;: &quot;javac $&#123;file&#125;&quot;,</span><br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;shell&quot;</span>,<br>      <span class="hljs-attr">&quot;group&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;kind&quot;</span>: <span class="hljs-string">&quot;build&quot;</span>,<br>          <span class="hljs-attr">&quot;isDefault&quot;</span>: <span class="hljs-literal">true</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;presentation&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;reveal&quot;</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>          <span class="hljs-attr">&quot;panel&quot;</span>: <span class="hljs-string">&quot;new&quot;</span>,<br>          <span class="hljs-attr">&quot;focus&quot;</span>: <span class="hljs-literal">true</span><br>      &#125;<br>     &#125;,<br>     &#123;<br>      <span class="hljs-attr">&quot;label&quot;</span>: <span class="hljs-string">&quot;run&quot;</span>,<br>      <span class="hljs-attr">&quot;command&quot;</span>: <span class="hljs-string">&quot;java -classpath $&#123;fileDirname&#125;\\bin $&#123;fileBasenameNoExtension&#125;&quot;</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;shell&quot;</span>,<br>      <span class="hljs-attr">&quot;dependsOn&quot;</span>: <span class="hljs-string">&quot;javac&quot;</span>,<span class="hljs-comment">// 加入这个依赖就会先javac生成class文件</span><br>      <span class="hljs-attr">&quot;group&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;kind&quot;</span>: <span class="hljs-string">&quot;test&quot;</span>,<br>          <span class="hljs-attr">&quot;isDefault&quot;</span>: <span class="hljs-literal">true</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;presentation&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;reveal&quot;</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>          <span class="hljs-attr">&quot;panel&quot;</span>: <span class="hljs-string">&quot;new&quot;</span>,<br>          <span class="hljs-attr">&quot;focus&quot;</span>: <span class="hljs-literal">true</span><br>      &#125;<br>     &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>java先把所有的类加载到正文段，同时静态初始化（static执行的时机），类似于预编译</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291017517.png" srcset="/img/loading.gif" lazyload alt=""></p>
</li>
<li><p>Math库中都是静态方法，都不需要生成对象(eg. random)，静态方法可以通过import引入</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291015737.png" srcset="/img/loading.gif" lazyload alt=""></p>
</li>
<li><p>单例设计模式：创建型模式，提供了一种创建对象的最佳方式。这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。</p>
<ul>
<li>单例类只能有一个实例。</li>
<li>单例类必须自己创建自己的唯一实例。</li>
<li>单例类必须给所有其他对象提供这一实例。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291020289.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>单例模式事实上有6种，课上介绍的这种叫做“线程安全的懒汉式”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 线程安全的懒汉式</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">T</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> T obj;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)<br>            obj = <span class="hljs-keyword">new</span> T();<br>        <span class="hljs-keyword">return</span> obj;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">signle</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        T t1 = T.getInstance();<br>        T t2 = T.getInstance();<br>        System.out.println(t1 == t2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291023640.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>这体现出两次获取的都是同一对象</p>
</li>
<li><p>关于==和equals</p>
<p>== 对于基本类型来是值比较，对于引用类型是引用比较；</p>
<p>equals默认情况下是引用比较，很多类重写了 equals 方法把它变成了值比较，如 String、Integer。</p>
<p>所以一般情况下 equals 比较的是值是否相等。</p>
</li>
<li><p>父类引用不能被强制转换为子类引用，子类引用可以隐式转换/强制转换成父类引用（指针）</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291027333.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>子类引用按需隐式转换到父类引用</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291028360.png" srcset="/img/loading.gif" lazyload alt=""></p>
</li>
<li><p>switch可以接收字符串（包括空串””），不能接收null，因为java的switch实现基于hashCode，null的hashCode值为0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">switchTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String s=<span class="hljs-keyword">null</span>; <span class="hljs-comment">// NullPointerException</span><br>        <span class="hljs-comment">// String s = &quot;&quot;;</span><br><br>        <span class="hljs-comment">// if (s != null)  // 若禁止传递空指针时的一种解决方法</span><br>        <span class="hljs-comment">// switch (s) &#123;</span><br>        <span class="hljs-keyword">switch</span> (s == <span class="hljs-keyword">null</span> ? <span class="hljs-string">&quot;null&quot;</span> : s) &#123;  <span class="hljs-comment">// 若必须检测空指针时的一种解决方法</span><br>            <span class="hljs-comment">// //null in switch cases 是预览功能，默认情况下禁用</span><br>            <span class="hljs-comment">// case null :</span><br>            <span class="hljs-comment">//     System.out.println(&quot;This is a nullptr?&quot;);</span><br>            <span class="hljs-comment">//     break;</span><br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;null&quot;</span>:<br>                System.out.println(<span class="hljs-string">&quot;This is a \&quot;null\&quot;!&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;&quot;</span>:<br>                System.out.println(<span class="hljs-string">&quot;This is a blank string!&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                System.out.println(<span class="hljs-string">&quot;This is a other string!&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>instanceof，二元操作符，使用方式类似于==</p>
<p>作用是测试它左边的对象是否是它右边的类的实例，返回 boolean 的数据类型。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291030193.png" srcset="/img/loading.gif" lazyload alt=""></p>
</li>
<li><p>实例和引用是两回事！一个实例如果不是被本类的引用所调用，可能无法调用实例的方法</p>
<p>例如父类引用调用子类实例便无法使用子类的方法</p>
<p>使用instanceof将实例和其本类的引用配套</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202111291032952.png" srcset="/img/loading.gif" lazyload alt=""></p>
</li>
<li><p>java11后的instanceof可以在判断为true后直接赋给本类引用，引用名为最后的参数</p>
<p>这可能是个语法糖，因为它不是三元运算符</p>
</li>
</ol>
<h1 id="12-1-继承、多态"><a href="#12-1-继承、多态" class="headerlink" title="12.1 继承、多态"></a>12.1 继承、多态</h1><p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112011108665.png" srcset="/img/loading.gif" lazyload alt=""></p>
<ol>
<li><p>编译时类型和运行时类型</p>
<p>Java中的许多对象（一般都是具有父子类关系的父类对象）在运行时都会出现两种类型：编译时类型和运行时类型。</p>
<p>例如：<code>Person person = new Student();</code>这行代码将会生成一个person变量，该变量的编译时类型是Person，运行时类型是Student。</p>
<p>编译时类型由声明该变量时使用的类型（引用的类型）决定，运行时类型由实际赋给该变量的对象的类型（实例的类型）决定。</p>
<p>变量在编译阶段只能调用其编译时类型所具有的方法，在运行阶段执行它运行时类型所具有的方法。即变量只能引用所在的类里的方法。</p>
<p>另外通过引用来访问对象包含的实例属性时，系统总是试图访问它编译时类所定义的属性，而不是它运行时所定义的属性。</p>
<p><strong>因为有编译时类型的限制，所以变量所调用的方法只能来自编译时类型的方法</strong></p>
<p>举两个例子：访问方法和访问属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(Father obj)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;in Father class, receive Father obj.&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Father</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(Father obj)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;in Son class, receive Father obj.&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(Son obj)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;in Son class, receive Son obj.&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Show</span><span class="hljs-params">(GrandSon obj)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;in Son class, receive GrandSon obj.&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GrandSon</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Son</span> </span>&#123;<br><br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Inheritance1</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Father father = <span class="hljs-keyword">new</span> Son();<br>        GrandSon grandSon = <span class="hljs-keyword">new</span> GrandSon();<br>        father.Show(grandSon);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112011131246.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>继承链(inheritance chain)：</p>
</li>
</ol>
<p>网上找的一份第二次作业第一题的答案，不小心粘在这了</p>
<p>①②③比较好理解，一般不会出错。④⑤就有点糊涂了，为什么输出的不是”B and B”呢？！！先来回顾一下多态性。         </p>
<p>运行时多态性是面向对象程序设计代码重用的一个最强大机制，动态性的概念也可以被说成“一个接口，多个方法”。Java实现运行时多态性的基础是动态方法调度，它是一种在运行时而不是在编译期调用重载方法的机制。         方法的重写Overriding和重载Overloading是Java多态性的不同表现。重写Overriding是父类与子类之间多态性的一种表现，重载Overloading是一个类中多态性的一种表现。如果在子类中定义某方法与其父类有相同的名称和参数，我们说该方法被重写(Overriding)。子类的对象使用这个方法时，将调用子类中的定义，对它而言，父类中的定义如同被“屏蔽”了。如果在一个类中定义了多个同名的方法，它们或有不同的参数个数或有不同的参数类型，则称为方法的重载(Overloading)。Overloaded的方法是可以改变返回值的类型。         </p>
<p>当超类对象引用变量引用子类对象时，被引用对象的类型而不是引用变量的类型决定了调用谁的成员方法，但是这个被调用的方法必须是在超类中定义过的，也就是说被子类覆盖的方法。 （但是如果强制把超类转换成子类的话，就可以调用子类中新添加而超类没有的方法了。）         </p>
<p>好了，先温习到这里，言归正传！实际上这里涉及方法调用的优先问题 ，优先级由高到低依次为：this.show(O)、super.show(O)、this.show((super)O)、super.show((super)O)。让我们来看看它是怎么工作的。         </p>
<p>比如④，a2.show(b)，a2是一个引用变量，类型为A，则this为a2，b是B的一个实例，于是它到类A里面找show(B obj)方法，没有找到，于是到A的super(超类)找，而A没有超类，因此转到第三优先级this.show((super)O)，this仍然是a2，这里O为B，(super)O即(super)B即A，因此它到类A里面找show(A obj)的方法，类A有这个方法，但是由于a2引用的是类B的一个对象，B覆盖了A的show(A obj)方法，因此最终锁定到类B的show(A obj)，输出为”B and A”。         再比如⑧，b.show(c)，b是一个引用变量，类型为B，则this为b，c是C的一个实例，于是它到类B找show(C obj)方法，没有找到，转而到B的超类A里面找，A里面也没有，因此也转到第三优先级this.show((super)O)，this为b，O为C，(super)O即(super)C即B，因此它到B里面找show(B obj)方法，找到了，由于b引用的是类B的一个对象，因此直接锁定到类B的show(B obj)，输出为”B and B”。         按照上面的方法，可以正确得到其他的结果。</p>
<h1 id="12-8-接口、lambda表达式、内部类"><a href="#12-8-接口、lambda表达式、内部类" class="headerlink" title="12.8 接口、lambda表达式、内部类"></a>12.8 接口、lambda表达式、内部类</h1><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口是对希望符合这个接口的类的一组<strong>需求</strong>。</p>
<p>接口没有实例。</p>
<p>接口中的所有方法都是<code>public</code>，所有字段都是<code>public static final</code></p>
<blockquote>
<p>注：Java语言规范建议不要提供多余的关键字</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091930957.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>实现接口的类若非抽象类，则必须实现接口中的所有方法</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091933259.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>实现接口时必须将方法声明为<code>public</code>，因为缺省访问权限为包内权限，编译器会报错，认为你试图提供更严格的（更弱的）访问权限</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112091937376.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>测试用到的代码</p>
<p>类图:</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112092021983.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>代码：</p>
<ol>
<li>Person.java</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.interfacetest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">(String n)</span> </span>&#123;  <span class="hljs-comment">// Java不支持默认值参数</span><br>        name = n;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">()</span> </span>&#123;  <span class="hljs-comment">// 但可以使用重载实现类似的功能</span><br>        <span class="hljs-keyword">this</span>(<span class="hljs-string">&quot;路人甲&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span> </span>&#123;  <span class="hljs-comment">// getMethods()只能获取父类中public权限的方法！如果不加public会出现虽然能调用但是反射获取不到的情况。</span><br>        System.out.println(<span class="hljs-string">&quot;The person is eating.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li><p>CanFight.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.interfacetest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CanFight</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> numberOfWins = <span class="hljs-number">10</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fight</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>CanSwim.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.interfacetest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CanSwim</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">swim</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Hero.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.interfacetest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CanFight</span>, <span class="hljs-title">CanSwim</span> </span>&#123;<br>    String title;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Hero</span><span class="hljs-params">(String n, String t)</span> </span>&#123;<br>        <span class="hljs-keyword">super</span>(n);<br>        title = t;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Hero</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">super</span>();<br>        title = <span class="hljs-string">&quot;无证骑士&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fight</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;The hero is fighting.&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">swim</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;The hero is swimming.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>Test.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.interfacetest;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Person h1 = <span class="hljs-keyword">new</span> Hero();<br>        Hero h2 = <span class="hljs-keyword">new</span> Hero(<span class="hljs-string">&quot;琦玉&quot;</span>, <span class="hljs-string">&quot;秃头披风侠&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Hero is a subtype of Person? &quot;</span> + (h2 <span class="hljs-keyword">instanceof</span> Person));<br>        System.out.println(<span class="hljs-string">&quot;Hero is a subtype of CanSwim? &quot;</span> + (h2 <span class="hljs-keyword">instanceof</span> CanSwim));<br>        System.out.println(<span class="hljs-string">&quot;Hero is a subtype of CanFight? &quot;</span> + (h2 <span class="hljs-keyword">instanceof</span> CanFight));<br><br>        System.out.println();<br>        Class&lt;? extends Person&gt; h1RuntimeClass = h1.getClass();<br>        System.out.println(h1RuntimeClass);<br>        Method[] methods = h1RuntimeClass.getMethods();<br>        <span class="hljs-keyword">for</span> (Method method : methods)<br>            System.out.println(method);<br><br>        System.out.println();<br>        Class&lt;? extends Person&gt; h2RuntimeClass = h2.getClass();<br>        System.out.println(h2RuntimeClass);<br>        Method[] methods2 = h2RuntimeClass.getMethods();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> method : methods2)<br>            System.out.println(method);<br><br>        System.out.println();<br>        System.out.println(h1.name);<br><span class="hljs-comment">//        System.out.println(h1.title);  // ERROR</span><br>        h1.eat();<br><span class="hljs-comment">//        h1.fight();  // ERROR</span><br><span class="hljs-comment">//        h1.swim();  // ERROR</span><br><br>        System.out.println();<br>        System.out.println(h2.name);<br>        System.out.println(h2.title);<br>        h2.eat();<br>        h2.fight();<br>        h2.swim();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>output.out</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs processing">Hero is a subtype of Person? <span class="hljs-keyword">true</span><br>Hero is a subtype of CanSwim? <span class="hljs-keyword">true</span><br>Hero is a subtype of CanFight? <span class="hljs-keyword">true</span><br><br>class edu.wanpengxu.course.Hero<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Hero.fight()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Hero.swim()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Person.eat()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait(<span class="hljs-keyword">long</span>,<span class="hljs-built_in">int</span>) <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait() <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait(<span class="hljs-keyword">long</span>) <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> java.lang.<span class="hljs-keyword">Object</span>.equals(java.lang.<span class="hljs-keyword">Object</span>)<br><span class="hljs-keyword">public</span> java.lang.<span class="hljs-keyword">String</span> java.lang.<span class="hljs-keyword">Object</span>.toString()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-built_in">int</span> java.lang.<span class="hljs-keyword">Object</span>.hashCode()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> java.lang.Class java.lang.<span class="hljs-keyword">Object</span>.getClass()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.notify()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.notifyAll()<br><br>class edu.wanpengxu.course.Hero<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Hero.fight()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Hero.swim()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> edu.wanpengxu.course.Person.eat()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait(<span class="hljs-keyword">long</span>,<span class="hljs-built_in">int</span>) <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait() <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.wait(<span class="hljs-keyword">long</span>) <span class="hljs-keyword">throws</span> java.lang.InterruptedException<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> java.lang.<span class="hljs-keyword">Object</span>.equals(java.lang.<span class="hljs-keyword">Object</span>)<br><span class="hljs-keyword">public</span> java.lang.<span class="hljs-keyword">String</span> java.lang.<span class="hljs-keyword">Object</span>.toString()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-built_in">int</span> java.lang.<span class="hljs-keyword">Object</span>.hashCode()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> java.lang.Class java.lang.<span class="hljs-keyword">Object</span>.getClass()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.notify()<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> java.lang.<span class="hljs-keyword">Object</span>.notifyAll()<br><br>路人甲<br>The person is eating.<br><br>琦玉<br>秃头披风侠<br>The person is eating.<br>The hero is fighting.<br>The hero is swimming.<br></code></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>反射只能获取public方法</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112092018603.png" srcset="/img/loading.gif" lazyload alt=""></p>
<h3 id="接口的属性"><a href="#接口的属性" class="headerlink" title="接口的属性"></a>接口的属性</h3><p>可以使用接口引用变量，变量必须是实现了接口的类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Comparable x;<br>x = <span class="hljs-keyword">new</span> Employee(...);<br></code></pre></td></tr></table></figure>
<p>可以使用<code>instanceof</code>检查一个对象是否实现了某个特定的接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (anObject <span class="hljs-keyword">instanceof</span> Comparable) &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p>允许有多条接口链，从通用性较高的接口扩展到专用性较高的接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Moveable</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">move</span> <span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> y)</span></span>;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Powered</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Moveable</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">milesPerGallon</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>一个类可以实现多个接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span>, <span class="hljs-title">Comparable</span></span><br></code></pre></td></tr></table></figure>
<h3 id="接口与抽象类"><a href="#接口与抽象类" class="headerlink" title="接口与抽象类"></a>接口与抽象类</h3><p>为什么Java中会有接口？</p>
<p>因为，有些程序设计语言（尤其是C++）允许一个类有多个超类，这个特性称为多重继承（multiple inheritance），Java的设计者选择了不支持多重继承，其主要原因是多重继承会让语言变得非常复杂（如同C++），或者效率会降低（如同Eiffel）。</p>
<p>接口可以提供多重继承的大多数好处，同时还能避免多重继承的复杂性和低效性。</p>
<p>所以Java只能扩展一个类却可以实现多个接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span>, <span class="hljs-title">Comparable</span>  // <span class="hljs-title">ERROR</span></span><br><span class="hljs-class"><span class="hljs-title">class</span> <span class="hljs-title">Employee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparable</span>  // <span class="hljs-title">OK</span></span><br></code></pre></td></tr></table></figure>
<h3 id="默认方法"><a href="#默认方法" class="headerlink" title="默认方法"></a>默认方法</h3><p>可以使用<code>default</code>修饰符为接口方法提供一个默认实现，这个默认方法主要用于“接口演化”，例如很久以前有这样一个类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bag</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Collention</span></span><br></code></pre></td></tr></table></figure>
<p>后来Java要在Collention中增加一个stream方法，如果这个方法不是默认方法，由于Bag此前并没有实现stream方法，程序将不能编译，即不能保证<strong>“源代码兼容”</strong>。</p>
<p><strong>“二进制兼容”</strong>：在升级库文件的时候，不必<strong>重新编译</strong>使用此库的可执行文件或其他库文件，并且程序的功能不被破坏。</p>
<p><strong>“源代码兼容”</strong>：在升级库文件的时候，不必<strong>修改</strong>使用此库的可执行文件或其他库文件的<strong>源代码</strong>，只需重新编译应用程序，即可使程序的功能不被破坏。</p>
<p>增加非默认方法stream后，若不对Bag类重新编译（即使用之前编译好的JAR文件），当程序在Bag实例上调用steam方法时会出现<code>AbstractMethodError</code></p>
<p>若增加的是默认方法，那么上述情况会调用<code>Collection.stream</code>方法</p>
<h3 id="解决默认方法冲突"><a href="#解决默认方法冲突" class="headerlink" title="解决默认方法冲突"></a>解决默认方法冲突</h3><ol>
<li><p>超类优先</p>
<p>若一个类继承了超类，实现了接口，且超类和接口中有相同签名的方法，使用超类中的方法</p>
</li>
<li><p>接口冲突（让程序员解决）</p>
<p>使用下面的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">default</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span> ;<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Named</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">default</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> getClass().getName() + <span class="hljs-string">&quot;_&quot;</span> + hashCode();<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Person</span>, <span class="hljs-title">Named</span></span>&#123;  <span class="hljs-comment">// ERROR</span><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112100931666.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>Java编译器会报错，让程序员来解决这个问题，解决方法是选择冲突方法中的一个</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Person</span>, <span class="hljs-title">Named</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Person.<span class="hljs-keyword">super</span>.getName();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>使用<code>&#123;接口名&#125;.super.&#123;方法名&#125;</code>的原因：在类继承中，我们使用<code>super.&#123;方法名&#125;</code>便可以调用超类的方法，但接口允许多继承，所以必须在super前指定是哪个接口。</p>
<blockquote>
<p>只要被实现的接口中的方法有一个提供了默认实现，编译器就会报错，若方法都没有默认实现则不存在冲突，因为必须在实现这些接口的类中实现方法。</p>
</blockquote>
</li>
</ol>
<h2 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h2><p>lambda表达式：匿名函数，是代码块以及必须传入代码块的变量规范。</p>
<blockquote>
<p>为什么是λ？</p>
<p>这是逻辑学家Alonzo Church受《数学原理》（<em>Principia Mathematica</em>）中用重音符^表示自由变量启发，采用大写lambda（Λ）表示参数，后来又改为了小写lambda（λ）。从此带参数变量的表达式就被称为lambda表达式。</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>语法格式为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">(parameters) -&gt; expression<br></code></pre></td></tr></table></figure>
<p>或<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">(parameters) -&gt; &#123;<br>    statements;<br>&#125;<br></code></pre></td></tr></table></figure></p>
<p>如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">(String first, String second) -&gt; &#123;<br>    first.length()-second.length();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>特征：</p>
<ol>
<li>可选参数类型：由编译器识别参数类型，可以忽略参数类型</li>
<li>可选的圆括号：若只有一个参数，可以忽略圆括号</li>
<li>可选的大括号及return：若只有一条语句，可以忽略大括号、分号及<code>return</code></li>
</ol>
<p>若一个lambda表达式只在某些分支有返回值而其他分支无返回值，编译器会报错，如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">(<span class="hljs-keyword">int</span> x) -&gt; &#123;<br>    <span class="hljs-keyword">if</span> (x &gt;= <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;  <span class="hljs-comment">// ERROR</span><br></code></pre></td></tr></table></figure>
<p>lambda 表达式的局部变量必须是<strong>事实最终变量</strong>（effectively final）（具有final特性），即lambda表达式使用的变量不可在之后被修改。</p>
<p>lambda表达式实际上是创建了一个对象以向方法传入。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112110019007.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>另外，</p>
<p>当lambda表达式里没有使用上下文中的其他变量时，则每次执行lambda表达式都使用同一个对象。</p>
<p>当lambda表达式里使用了上下文中的其他变量时，则每次执行lambda表达式都会新建一个对象。</p>
<h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><p>函数式接口：只有一个抽象方法的接口（可以有静态方法、默认方法和重写Object的公共方法）。</p>
<blockquote>
<p>An informative annotation type used to indicate that an interface type declaration is intended to be a functional interface as defined by the Java Language Specification. Conceptually, <strong>a functional interface has exactly one abstract method.</strong> Since <strong><em>default methods</em></strong> have an implementation, they <strong>are not abstract.</strong> <strong>If an interface declares an abstract method overriding one of the public methods of <em>java.lang.Object</em>, that also does not count toward the interface’s abstract method count</strong> since any implementation of the interface will have an implementation from java.lang.Object or elsewhere.<br>Note that instances of functional interfaces can be created with lambda expressions, method references, or constructor references.<br>If a type is annotated with this annotation type, compilers are required to generate an error message unless:<br>The type is an interface type and not an annotation type, enum, or class.<br>The annotated type satisfies the requirements of a functional interface.<br>However, the compiler will treat any interface meeting the definition of a functional interface as a functional interface regardless of whether or not a FunctionalInterface annotation is present on the interface declaration.<br>自:<br>1.8</p>
</blockquote>
<p>eg. 函数式接口<code>Comparator</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Comparator</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(T o1, T o2)</span></span>;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span></span>;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> Comparator&lt;T&gt; <span class="hljs-title">reversed</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Collections.reverseOrder(<span class="hljs-keyword">this</span>);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> Comparator&lt;T&gt; <span class="hljs-title">thenComparing</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; other)</span> </span>&#123;<br>        Objects.requireNonNull(other);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable) (c1, c2) -&gt; &#123;<br>            <span class="hljs-keyword">int</span> res = compare(c1, c2);<br>            <span class="hljs-keyword">return</span> (res != <span class="hljs-number">0</span>) ? res : other.compare(c1, c2);<br>        &#125;;<br>    &#125;<br>    <br>    <span class="hljs-keyword">default</span> &lt;U&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">thenComparing</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">            Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; keyExtractor,</span></span><br><span class="hljs-params"><span class="hljs-function">            Comparator&lt;? <span class="hljs-keyword">super</span> U&gt; keyComparator)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> thenComparing(comparing(keyExtractor, keyComparator));<br>    &#125;<br>    <br>    <span class="hljs-keyword">default</span> &lt;U extends Comparable&lt;? <span class="hljs-keyword">super</span> U&gt;&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">thenComparing</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">            Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; keyExtractor)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> thenComparing(comparing(keyExtractor));<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> Comparator&lt;T&gt; <span class="hljs-title">thenComparingInt</span><span class="hljs-params">(ToIntFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> thenComparing(comparingInt(keyExtractor));<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> Comparator&lt;T&gt; <span class="hljs-title">thenComparingLong</span><span class="hljs-params">(ToLongFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> thenComparing(comparingLong(keyExtractor));<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">default</span> Comparator&lt;T&gt; <span class="hljs-title">thenComparingDouble</span><span class="hljs-params">(ToDoubleFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> thenComparing(comparingDouble(keyExtractor));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T extends Comparable&lt;? <span class="hljs-keyword">super</span> T&gt;&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">reverseOrder</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> Collections.reverseOrder();<br>    &#125;<br>    <br>    <span class="hljs-meta">@SuppressWarnings(&quot;unchecked&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T extends Comparable&lt;? <span class="hljs-keyword">super</span> T&gt;&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">naturalOrder</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt;) Comparators.NaturalOrderComparator.INSTANCE;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">nullsFirst</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; comparator)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparators.NullComparator&lt;&gt;(<span class="hljs-keyword">true</span>, comparator);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">nullsLast</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; comparator)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparators.NullComparator&lt;&gt;(<span class="hljs-keyword">false</span>, comparator);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T, U&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">comparing</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">            Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; keyExtractor,</span></span><br><span class="hljs-params"><span class="hljs-function">            Comparator&lt;? <span class="hljs-keyword">super</span> U&gt; keyComparator)</span></span><br><span class="hljs-function">    </span>&#123;<br>        Objects.requireNonNull(keyExtractor);<br>        Objects.requireNonNull(keyComparator);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable)<br>            (c1, c2) -&gt; keyComparator.compare(keyExtractor.apply(c1),<br>                                              keyExtractor.apply(c2));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T, U extends Comparable&lt;? <span class="hljs-keyword">super</span> U&gt;&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">comparing</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">            Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; keyExtractor)</span></span><br><span class="hljs-function">    </span>&#123;<br>        Objects.requireNonNull(keyExtractor);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable)<br>            (c1, c2) -&gt; keyExtractor.apply(c1).compareTo(keyExtractor.apply(c2));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">comparingInt</span><span class="hljs-params">(ToIntFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        Objects.requireNonNull(keyExtractor);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable)<br>            (c1, c2) -&gt; Integer.compare(keyExtractor.applyAsInt(c1), keyExtractor.applyAsInt(c2));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Comparator&lt;T&gt; <span class="hljs-title">comparingLong</span><span class="hljs-params">(ToLongFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        Objects.requireNonNull(keyExtractor);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable)<br>            (c1, c2) -&gt; Long.compare(keyExtractor.applyAsLong(c1), keyExtractor.applyAsLong(c2));<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>&lt;T&gt; Comparator&lt;T&gt; <span class="hljs-title">comparingDouble</span><span class="hljs-params">(ToDoubleFunction&lt;? <span class="hljs-keyword">super</span> T&gt; keyExtractor)</span> </span>&#123;<br>        Objects.requireNonNull(keyExtractor);<br>        <span class="hljs-keyword">return</span> (Comparator&lt;T&gt; &amp; Serializable)<br>            (c1, c2) -&gt; Double.compare(keyExtractor.applyAsDouble(c1), keyExtractor.applyAsDouble(c2));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>如静态方法<code>Arrays.sort</code>的第二个参数需要一个<code>Comparator</code>实例，而<code>Comparator</code>就是一个函数式接口，所以可以提供一个lambda表达式。</p>
<p>下面是<code>Arrays.sort</code>和<code>Comparator</code>的方法原型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Contract(mutates = &quot;param1&quot;)</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-meta">@NotNull</span> T[] a,</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-meta">@Nullable</span> Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; c)</span> </span>&#123;<br>    ...<br>&#125;<br>    <br><span class="hljs-meta">@FunctionalInterface</span> <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Comparator</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(T o1, T o2)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>那么我们可以这样使用<code>Arrays.sort</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Array.sort(words,<br>          (first, second) -&gt; first.length() - second.length());<br></code></pre></td></tr></table></figure>
<p>这其实就相当于C++11中的</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">sort</span>(words.<span class="hljs-built_in">begin</span>(), <br>     words.<span class="hljs-built_in">end</span>(),<br>     [](string first, string second) -&gt; <span class="hljs-keyword">bool</span> &#123; <span class="hljs-keyword">return</span> first.<span class="hljs-built_in">length</span>() &gt; second.<span class="hljs-built_in">length</span>(); &#125;);<br></code></pre></td></tr></table></figure>
<p>或者C++11前（没有lambda表达式，只能传实名函数）的</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">comp</span><span class="hljs-params">(string first, string second)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> first.<span class="hljs-built_in">length</span>() &gt; second.<span class="hljs-built_in">length</span>();<br>&#125; <br><span class="hljs-built_in">sort</span>(words.<span class="hljs-built_in">begin</span>(),<br>     words.<span class="hljs-built_in">end</span>(),<br>     comp);<br></code></pre></td></tr></table></figure>
<p>lambda表达式可以转换为函数式接口，如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">var</span> timer = <span class="hljs-keyword">new</span> Timer (<span class="hljs-number">1000</span>, <br>                      event -&gt; &#123;<br>                          System.out.println(<span class="hljs-string">&quot;At the tone, the time is &quot;</span> + <br>                                            Instant.ofEpochMilli(event.getWhen()));<br>                          Toolkit.getDefaultToolKit().beep();<br>                      &#125;);<br></code></pre></td></tr></table></figure>
<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>方法引用：指示编译器生成一个函数式接口的实例，覆盖这个接口的抽象方法来调用给定的方法。</p>
<p>可以理解为把方法抽取出来作为“函数”</p>
<p>使用方法主要有3：</p>
<ol>
<li><p>object::instanceMethod</p>
<p>eg. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out::println<br><span class="hljs-comment">// 等价于</span><br>x -&gt; System.out.println(x);<br><span class="hljs-comment">// 实例方法，提供了实例，把传入的都用来做参数</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>Class::instanceMethod</p>
<p>eg.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">String::compareToIgnoreCase<br><span class="hljs-comment">// 等价于</span><br>(x, y) -&gt; x.compareToIgnoreCase(y)<br><span class="hljs-comment">// 实例方法，未提供实例，把传入参数的第一个当实例</span><br><span class="hljs-comment">// 因为实例方法的第一个参数总是self</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>Class::staticMethod</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Math::pow<br><span class="hljs-comment">// 等价于</span><br>(x, y) -&gt; Math.pow(x, y)<br><span class="hljs-comment">// 静态方法不需要实例，把传入的都用来做参数</span><br></code></pre></td></tr></table></figure>
</li>
</ol>
<p>也可以在方法中使用<code>this</code>, <code>super</code>关键字</p>
<p>举个例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.lambdatest;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        String[] words = &#123;<span class="hljs-string">&quot;object&quot;</span>, <span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;lambda&quot;</span>, <span class="hljs-string">&quot;interface&quot;</span>, <span class="hljs-string">&quot;abstract&quot;</span>&#125;;<br><span class="hljs-comment">//        Arrays.sort(words,</span><br><span class="hljs-comment">//                (first, second) -&gt; first.length() - second.length());</span><br>        Arrays.sort(words,<br>                Test::comp);<br><span class="hljs-comment">//        Arrays.sort(words,</span><br><span class="hljs-comment">//                String::compareTo);</span><br><span class="hljs-comment">//        Arrays.sort(words,</span><br><span class="hljs-comment">//                Comparator.comparingInt(String::length));  // Comparator.comparingInt(x -&gt; x.length())</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> word : words)<br>            System.out.println(word);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">comp</span><span class="hljs-params">(String first, String second)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> first.length() - second.length();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>对于第一种<code>Arrays.sort</code>，就是直接传入lambda表达式</p>
<p>对于第二种<code>Arrays.sort</code>，是使用了自定义的方法引用</p>
<p>对于第三、四种<code>Arrays.sort</code>，是使用了<code>Java API</code>的方法引用</p>
<p>output.out</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span><br><span class="hljs-symbol">object</span><br><span class="hljs-symbol">lambda</span><br><span class="hljs-symbol">abstract</span><br><span class="hljs-symbol">interface</span><br></code></pre></td></tr></table></figure>
<p>从结果可以看出程序按照我们传入的算法进行了稳定的排序。</p>
<p>那么为什么可以呢？</p>
<p>我们首先看一下 <code>Arrays.sort</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(T[] a, Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; c)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-keyword">null</span>) &#123;<br>            sort(a);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (LegacyMergeSort.userRequested)<br>                legacyMergeSort(a, c);<br>            <span class="hljs-keyword">else</span><br>                TimSort.sort(a, <span class="hljs-number">0</span>, a.length, c, <span class="hljs-keyword">null</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>可以看到接收的第二个参数是<code>Comparator</code>类的一个实例<code>c</code>，如果c不为null，那么将<code>c</code>传入<code>legacyMergeSort</code>(历史归并排序)。</p>
<p>跟踪进入<code>legacyMergeSort</code>方法看看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">legacyMergeSort</span><span class="hljs-params">(T[] a, Comparator&lt;? <span class="hljs-keyword">super</span> T&gt; c)</span> </span>&#123;<br>        T[] aux = a.clone();<br>        <span class="hljs-keyword">if</span> (c==<span class="hljs-keyword">null</span>)<br>            mergeSort(aux, a, <span class="hljs-number">0</span>, a.length, <span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">else</span><br>            mergeSort(aux, a, <span class="hljs-number">0</span>, a.length, <span class="hljs-number">0</span>, c);<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>可以看到接收的第二个参数是也<code>Comparator</code>类的一个实例<code>c</code>，如果c不为null，那么将<code>c</code>传入<code>mergeSort</code>(归并排序/合并排序)。</p>
<p>跟踪进入<code>mergeSort</code>方法看看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mergeSort</span><span class="hljs-params">(Object[] src,</span></span><br><span class="hljs-params"><span class="hljs-function">                                  Object[] dest,</span></span><br><span class="hljs-params"><span class="hljs-function">                                  <span class="hljs-keyword">int</span> low, <span class="hljs-keyword">int</span> high, <span class="hljs-keyword">int</span> off,</span></span><br><span class="hljs-params"><span class="hljs-function">                                  Comparator c)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> length = high - low;<br><br>        <span class="hljs-comment">// Insertion sort on smallest arrays</span><br>        <span class="hljs-keyword">if</span> (length &lt; INSERTIONSORT_THRESHOLD) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=low; i&lt;high; i++)<br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=i; j&gt;low &amp;&amp; c.compare(dest[j-<span class="hljs-number">1</span>], dest[j])&gt;<span class="hljs-number">0</span>; j--)<br>                    swap(dest, j, j-<span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// Recursively sort halves of dest into src</span><br>        <span class="hljs-keyword">int</span> destLow  = low;<br>        <span class="hljs-keyword">int</span> destHigh = high;<br>        low  += off;<br>        high += off;<br>        <span class="hljs-keyword">int</span> mid = (low + high) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        mergeSort(dest, src, low, mid, -off, c);<br>        mergeSort(dest, src, mid, high, -off, c);<br><br>        <span class="hljs-comment">// If list is already sorted, just copy from src to dest.  This is an</span><br>        <span class="hljs-comment">// optimization that results in faster sorts for nearly ordered lists.</span><br>        <span class="hljs-keyword">if</span> (c.compare(src[mid-<span class="hljs-number">1</span>], src[mid]) &lt;= <span class="hljs-number">0</span>) &#123;<br>           System.arraycopy(src, low, dest, destLow, length);<br>           <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// Merge sorted halves (now in src) into dest</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = destLow, p = low, q = mid; i &lt; destHigh; i++) &#123;<br>            <span class="hljs-keyword">if</span> (q &gt;= high || p &lt; mid &amp;&amp; c.compare(src[p], src[q]) &lt;= <span class="hljs-number">0</span>)<br>                dest[i] = src[p++];<br>            <span class="hljs-keyword">else</span><br>                dest[i] = src[q++];<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>在这里看到了<code>c.compare(dest[j-1], dest[j])</code></p>
<p>跟踪进入<code>Comparator</code>类里面看看<code>compare</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Comparator</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(T o1, T o2)</span></span>;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p>可以看到，我们自定义的方法与方法签名完全一致（除了方法名外，方法参数一致，返回类型相同），所以可以传入。</p>
<p>同理，可以看一下<code>String</code>类里的<code>compareTo</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(String anotherString)</span> </span>&#123;<br>        <span class="hljs-keyword">byte</span> v1[] = value;<br>        <span class="hljs-keyword">byte</span> v2[] = anotherString.value;<br>        <span class="hljs-keyword">byte</span> coder = coder();<br>        <span class="hljs-keyword">if</span> (coder == anotherString.coder()) &#123;<br>            <span class="hljs-keyword">return</span> coder == LATIN1 ? StringLatin1.compareTo(v1, v2)<br>                                   : StringUTF16.compareTo(v1, v2);<br>        &#125;<br>        <span class="hljs-keyword">return</span> coder == LATIN1 ? StringLatin1.compareToUTF16(v1, v2)<br>                               : StringUTF16.compareToLatin1(v1, v2);<br>     &#125;<br></code></pre></td></tr></table></figure>
<p>函数签名看起来不太一样，但因为实例方法有一个隐含的<code>this</code>参数，<code>String</code>类的<code>compareTo</code>方法在实际调用的时候，第一个隐含参数总是传入<code>this</code>，相当于静态方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(<span class="hljs-keyword">this</span>, String o)</span></span>;<br></code></pre></td></tr></table></figure>
<p>所以它也可以作为方法引用传入。</p>
<h3 id="构造器引用"><a href="#构造器引用" class="headerlink" title="构造器引用"></a>构造器引用</h3><p>可以认为是方法名为new的方法引用，二者都是对lambda表达式的简化。</p>
<p>eg. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Student::<span class="hljs-keyword">new</span><br><span class="hljs-comment">// 等价于</span><br>age -&gt; <span class="hljs-keyword">new</span> Student(age)<br></code></pre></td></tr></table></figure>
<p>此后可以使用<code>apply</code>方法向其传入参数。</p>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><p>内部类（inner class）：定义在另一个类中的类。</p>
<p>使用内部类的原因：</p>
<ol>
<li>内部类可以对同一个包中的其他类隐藏</li>
<li>内部类方法可以访问外围类的作用域中所有的数据，包括原本私有的数据</li>
<li>便于<strong>回调</strong>（以后补）</li>
</ol>
<p>语法格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OuterClass</span> </span>&#123;   <span class="hljs-comment">// 外部类</span><br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123; <span class="hljs-comment">// 嵌套类，或称为内部类</span><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>内部类与外围类的字段、方法处于相同地位（都是外围类的成员）</p>
<p>内部类可以直接访问外围类成员</p>
<h3 id="非静态内部类"><a href="#非静态内部类" class="headerlink" title="非静态内部类"></a>非静态内部类</h3><p>外围类不能直接使用非静态内部类的成员，但可以创建一个内部类的实例，通过这个实例访问内部类的成员，有两种实现方法。</p>
<ol>
<li><p>在外围类内的方法中创建，与创建一般对象相同</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;内部类类名&#125; &#123;内部类变量&#125; = <span class="hljs-keyword">new</span> &#123;内部类构造方法名&#125;(&#123;参数列表&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p>在外围类外创建，需要使用如下格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;外部类实例&#125;.&#123;内部类类名&#125; &#123;内部类变量&#125; = &#123;外部类实例&#125;.new &#123;内部类构造方法名&#125;(&#123;参数列表&#125;);<br></code></pre></td></tr></table></figure>
<p>即在两侧左边同时加了<code>&#123;外部类实例&#125;.</code>以做限定</p>
</li>
</ol>
<p>若使用 <code>private</code> 或 <code>protected</code> 来修饰内部类，那么方法2将失效。</p>
<p>eg. PPT魔改例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.innerclasstest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OuterClass</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> i1;<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String label;<br><br>        InnerClass(String whereTo) &#123;<br>            label = whereTo;<br>        &#125;<br><br>        <span class="hljs-function">String <span class="hljs-title">readLabel</span><span class="hljs-params">()</span> </span>&#123;<br>            <span class="hljs-keyword">return</span> label + (i1++);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ship</span><span class="hljs-params">(String dest)</span> </span>&#123;<br>        InnerClass i = <span class="hljs-keyword">new</span> InnerClass(dest);<br>        System.out.println(i.readLabel());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.innerclasstest;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        OuterClass outerClass = <span class="hljs-keyword">new</span> OuterClass();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">4</span>; i++)<br>            outerClass.ship(<span class="hljs-string">&quot;1Test&quot;</span>);<br>        OuterClass.InnerClass innerClass = outerClass.<span class="hljs-function">new <span class="hljs-title">InnerClass</span><span class="hljs-params">(<span class="hljs-string">&quot;2Test&quot;</span>)</span></span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">5</span>; i &lt;= <span class="hljs-number">9</span>; i++)<br>            System.out.println(innerClass.readLabel());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs">1Test0<br>1Test1<br>1Test2<br>1Test3<br>1Test4<br>2Test5<br>2Test6<br>2Test7<br>2Test8<br>2Test9<br></code></pre></td></tr></table></figure>
<h3 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h3><p>可以在外部类外直接创建静态内部类</p>
<p>静态内部类无法直接访问外部类的非static成员，但可以通过创建外部类实例访问，如eg2。</p>
<p><img src="https://cdn.jsdelivr.net/gh/WanpengXu/myPicGo/img/202112102354155.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>eg. PPT魔改例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.innerclasstest2;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OuterClass</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> a = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> b = <span class="hljs-number">2</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> c = <span class="hljs-number">3</span>;<br><br>        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//            System.out.println(&quot;OuterClass&#x27;s a: &quot; + a);  // ERROR</span><br>            System.out.println(<span class="hljs-string">&quot;OuterClass&#x27;s b: &quot;</span> + b);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        OuterClass.InnerClass.show();<br>        OuterClass.InnerClass innerClass = <span class="hljs-keyword">new</span> OuterClass.InnerClass();<br>        System.out.println(innerClass.c);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>eg2.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.innerclasstest3;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OuterClass</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String s1 = <span class="hljs-string">&quot;I am in OuterClass&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String s2 = <span class="hljs-string">&quot;static in OuterClass&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String s1 = <span class="hljs-string">&quot;I am in InnerClass&quot;</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String s3 = <span class="hljs-keyword">new</span> OuterClass().s1;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>            System.out.println(s1);<br>            System.out.println(<span class="hljs-keyword">this</span>.s1);<br>            System.out.println(s3);<br>            System.out.println(s2);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        OuterClass.InnerClass innerClass = <span class="hljs-keyword">new</span> OuterClass.InnerClass();<br><span class="hljs-comment">//        System.out.println(innerClass instanceof OuterClass);  // ERROR 内部类不是外围类的子类</span><br>        innerClass.display();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">I</span> am in InnerClass<br><span class="hljs-selector-tag">I</span> am in InnerClass<br><span class="hljs-selector-tag">I</span> am in OuterClass<br>static<br></code></pre></td></tr></table></figure>
<h3 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h3><p>匿名内部类（anonymous inner class）</p>
<p>这种方法最好使用lambda表达式替代，如lambda表达式那一节的截图一般。</p>
<p>假设有一个超类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class1</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am Class1&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>一般的类创建实例的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Class1</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am Class2&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Class1 commonClassObject = <span class="hljs-keyword">new</span> Class2();<br>        commonClassObject.display();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>匿名内部类创建实例的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Class1 anonymousInnerClassObject = <span class="hljs-keyword">new</span> Class1() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;I am Class3&quot;</span>);<br>            &#125;<br>        &#125;;<br>        anonymousInnerClassObject.display();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>可以看到减少了不少代码量</p>
<p>完整测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> edu.wanpengxu.course.anonymousinnerclasstest;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class1</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am Class1&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Class2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Class1</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am Class2&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Class1 commonClassObject = <span class="hljs-keyword">new</span> Class2();<br>        commonClassObject.display();<br><br>        Class1 anonymousInnerClassObject = <span class="hljs-keyword">new</span> Class1() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;I am Class3&quot;</span>);<br>            &#125;<br>        &#125;;<br>        anonymousInnerClassObject.display();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">I</span> am Class<span class="hljs-number">2</span><br><span class="hljs-attribute">I</span> am Class<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>
<p>事实上除了创建类的实例，还可以创建接口的实例。</p>
<h1 id="12-9-异常"><a href="#12-9-异常" class="headerlink" title="12.9 异常"></a>12.9 异常</h1><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Java/">Java</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/12/11/%E6%95%A3%E4%B9%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E4%B9%8B%E5%A1%94/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">散乱的知识之塔</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/11/28/%E5%A4%87%E8%80%832021%E5%B9%B412%E6%9C%88CSP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="hidden-mobile">备考2021年12月CSP学习笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="twikoo"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/twikoo@1/dist/twikoo.all.min.js', function() {
        var options = Object.assign(
          {"envId":"my-comment-4gzjxuqv80cca5ee","region":"ap-shanghai","path":"window.location.pathname"},
          {
            el: '#twikoo',
            path: 'window.location.pathname',
            onCommentLoaded: function() {
              Fluid.plugins.initFancyBox('#twikoo .tk-content img:not(.tk-owo-emotion)');
            }
          }
        )
        twikoo.init(options)
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script  src="/js/duration.js" ></script> </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  








  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
